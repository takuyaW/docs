---
title: Git SSH との連携
weight: 30
---

Monacaでは、Git サービスを使ってレポジトリとプロジェクトを SSH
認証で接続することができます。GitHub は、SSH 接続をサポートする Git
サービスの 1 つです。 次の項目では、GitHub を例として使用します。

{{<note>}}
    現在、SSH 接続の Git サービスは、 {{<link href="../../changes" title="新しい Monaca クラウド IDE">}} でのみ利用可能です。
{{</note>}}

{{<note>}}
    ここでは、Public 指定されたレポジトリを対象として解説を進めます。Private 指定のレポジトリに接続する場合には、対応する Monacaプランに加入する必要があります。詳細は、 {{<link href="https://ja.monaca.io/pricing.html" title="料金プラン">}} をご確認ください。
{{</note>}}


事前準備
--------

Monaca クラウド IDE
のバージョン管理機能を使用する場合、次のアカウントが必要となります。

-   SSH をサポートしている Git サービスのアカウント
-   [Monaca](https://monaca.mobi/en/register/start) アカウント

セットアップ
------------

### ステップ 1: SSH キーの生成

1.  [SSHキー管理](https://monaca.mobi/en/ssh) 画面を表示します。
2.  {{<guilabel name="SSHキー 再生成">}} ボタンをクリックします。

    {{<img src="/images/monaca_ide/manual/version_control/17.png" width="600">}}

3.  次の項目 ( [Git サービスに SSH キーを追加する](#ステップ-2-git-サービスに-ssh-キーを追加する) )
    で使用するために生成されたキーをコピーします。

### ステップ 2: Git サービスに SSH キーを追加する

Monaca と Git
サービスプロバイダ間の正しい認証のために、前の項目で生成された SSH
キーを Git サービスアカウントに追加する必要があります。

例では、GitHub を使用しています。 他のサービスについては、Git
サービスのドキュメントを参照してください。

1.  [SSH Key](https://github.com/settings/keys) 画面を表示します。
2.  {{<guilabel name="New SSH key">}} ボタンをクリックします。
3.  以下の情報を入力します。

    -   `Title`: キーのタイトル
    -   `Key`: Monacaアカウントから生成された SSH キー（「1. SSH キーの生成」で作成した SSH キー）

4.  {{<guilabel name="Add SSH key">}} ボタンをクリックします。

既存の Monaca プロジェクトを新しい Git レポジトリに接続する
-----------------------------------------------------------

### ステップ 1: 新しい空のレポジトリを作成する

任意の Git
サービスで、新しいレポジトリを作成できます。この項目では、次のようにGitHubに新しいレポジトリを作成します。

1.  GitHub アカウントに移動し、新しい空のレポジトリを作成します（Readme
    ファイルなし）。
2.  {{<guilabel name="SSH">}} ボタンを選択します。
3.  SSH リンクをコピーします（下記のスクリーンショットを参照）。
    次の項目の後半に Monaca クラウド IDE でこのリンクを使用します。

    {{<img src="/images/monaca_ide/manual/version_control/18.png" width="600">}}

### ステップ 2: レポジトリと Monaca プロジェクトの接続

1.  Monaca Dashboard から、レポジトリに接続するプロジェクトを開きます。
2.  Monaca クラウド IDE のメニューから、{{<menu menu1="バージョン管理" menu2="設定">}}
    を選択します。
3.  `Git SSH` オプションを以下のように選択してください。

    {{<img src="/images/monaca_ide/manual/version_control/16.png" width="500">}}

4.  次に、 `Repository URL` (上記のリンク) と `Committer Name`
    を入力する必要があります。

    {{<note>}}
        設定後に別のレポジトリに変更することはできませんのでご注意ください。
    {{</note>}}

    {{<img src="/images/monaca_ide/manual/version_control/19.png" width="500">}}

5.  {{<guilabel name="設定する">}} ボタンをクリックします。
6.  プロジェクトは新しいレポジトリにアップロードされます。
    デフォルトでは、作業ブランチは master として設定されます。
    別の作業ブランチに切り替える場合は、[ バージョン管理設定 ] ページ
    ({{<menu menu1="バージョン管理" menu2="設定">}}) へ移動します。

既存プロジェクトを Git レポジトリから Monaca にインポートする
-------------------------------------------------------------

1.  Monaca アカウントを使用して、[Monaca クラウド
    IDE](https://monaca.mobi/ja/login) にログインします。
2.  ダッシュボード上で、{{<guilabel name="インポート">}} を選択します。
3.  プロジェクトのインポート画面で必要な情報を入力し、「Gitのレポジトリからインポート」を選択します。
    次に、 `レポジトリURL` を入力し、 {{<guilabel name="インポート">}}
    ボタンをクリックします。

    {{<img src="/images/monaca_ide/manual/version_control/21.png" width="500">}}

4.  インポートの完了後、Monaca
    ダッシュボード上で対象のプロジェクトが表示されていることを確認します。デフォルトでは、master
    ブランチのコンテンツがインポート対象となります。ブランチは、[ バージョン管理設定 ] ページ上で切り替えることができます (
    {{<menu menu1="バージョン管理" menu2="設定">}} )。

リモートレポジトリを使用した作業
--------------------------------

レポジトリとプロジェクト間の接続完了後は、チームメンバーと同じプロジェクトで作業を開始し、Monaca
クラウド IDE から最新のアップデートと同期させることができます。

Monaca クラウド IDE
では、ユーザーフレンドリーなバージョン管理用のインターフェイスを提供しています。このインターフェイスを使用すれば、Git
のコマンドの詳細を意識せずに、基本的な操作を一通り行うことができます。

### ブランチの切り替え ( Git コマンドの checkout )

複数のブランチを使用したプロジェクトで、ブランチの切り替えを行う場合は、次の手順に従います。

1.  Monaca クラウド IDE のメニューから、{{<menu menu1="バージョン管理" menu2="設定">}}
    を選択します。
2.  現在の作業ブランチから切り替えたいブランチを選択し、{{<guilabel name="アップデート">}}
    ボタンをクリックします。

    {{<img src="/images/monaca_ide/manual/version_control/20.png" width="500">}}

{{<note>}}
現在のブランチで行った変更をコミットせずに、ブランチの切り替えを行う場合、エラーが表示されます。ブランチを切り替える場合には、最初に、作業内容をコミット
( 場合によっては、リモートにプッシュまで ) してください。
{{</note>}}

### リモートレポジトリから最新の内容を取得

Git
コマンドでは、リモートレポジトリから最新の情報を取得/ダウンロードする場合、`git pull`
( git プル ) コマンドを使用します。Monaca クラウド IDE
では、リモートレポジトリから最新の情報を取得する場合、Monaca クラウド
IDE のメニューから、{{<menu menu1="バージョン管理" menu2="プル">}}
を選択します。リモートレポジトリ側の内容が更新されている場合、その内容がダウンロードされ、対応するブランチ側に反映されます。

{{<note>}}
IDE 上でプロジェクトを作成した場合、開発者側が自由に作業できるファイルのほとんどは、<code>www</code>
フォルダー内に置かれています。これ以外にも、IDE
上には表示されないシステム側のファイルもありますが、リモートレポジトリとの同期時には、これらのファイルも一緒にアップロード・ダウンロードされています。
{{</note>}}

### 変更箇所のコミットとリモートレポジトリへの反映

現在作業をしているブランチで行った変更を、リモートレポジトリ側に反映させます。最初に、次の手順に従い、コミットを行い、リモートレポジトリ側へプッシュします
( コミット前に、ファイルを保存する必要があります )。

1.  Monaca クラウド IDE のメニューから、{{<menu menu1="バージョン管理" menu2="コミット">}}
    を選択します。
2.  コミットメッセージを入力して、コミット対象のファイルにチェックを入れます。次に、{{<guilabel name="コミット">}}
    ボタンをクリックします。
3.  ここまでの手順で、リモートレポジトリに更新を反映させる準備ができました。次に、{{<menu menu1="バージョン管理" menu2="プッシュ">}} を選択します。コミット後、リモートレポジトリ側が更新されているか確認します。

### リモートレポジトリ側のコミット履歴の表示 ( GitHub 側の履歴ページ )

{{<note>}}
選択可能な公開 Git サービスとプライベート Git
サービスが多数存在するため、リモートコミット履歴の URL
は、すべてのサービスで認識されません。このオプションは、SSH
レポジトリにリンクされたプロジェクトでは使用できません。
{{</note>}}

リモートレポジトリ側 ( GitHub 側 )
のコミット履歴を確認する場合、{{<menu menu1="バージョン管理" menu2="リモートのコミット履歴">}}
を選択します。現在作業しているブランチのコミット履歴が表示された、GitHub
側のサイト ( 外部ページ ) にリダイレクトされます。

### ローカルコミットの履歴表示 ( Monaca クラウド IDE 側の履歴ページ )

ローカルコミットとは、Monaca クラウド IDE
上で行ったコミットを指します。{{<menu menu1="バージョン管理" menu2="コミット履歴">}}
を選択すれば、ローカルコミットの履歴を表示できます。各コミットの内容を確認する場合には、コミットメッセージ横の
ID をクリックします。
