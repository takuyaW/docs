---
title: Android アプリのビルド
weight: 20
---

ビルドの種類
------------

Monaca では、デバッグビルド版、リリースビルド版の 2 種類の Android
アプリをビルドできます。これらの相違点は、次のとおりです。

<table>
    <tr>
        <th width="17%">ビルドの種類</th>
        <th>説明</th>
        <th width="30%">インストール方法</th>
    </tr>
    <tr>
        <td><b>デバッグビルド</b></td>
        <td>パッケージに署名がないため、マーケットでの配布は行えません。</td>
        <td>
            <ul>
                <li>QR コード</li>
                <li><a href="/ja/products_guide/debugger/features/#プロジェクトオプション">ネットワーク インストール</a></li>
                <li>サイドローディング ( Sideloading )</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td><b>リリースビルド</b></td>
        <td>コードサイン ( コード署名/Code Sign ) を使用して、署名したパッケージです。マーケットで配布できます。</td>
        <td>
            <ul>
                <li>サイドローディング ( Sideloading )</li>
                <li>Google Play ストア経由または他のマーケット経由</li>
            </ul>
        </td>
    </tr>
</table>

{{<note>}}
サイドローディング ( Sideloading )
とは、一般的にはファイルのアップロード・ダウンロードを指しますが、ここでは、アプリのパッケージ
( APK 形式 )
を、マーケットを経由せずに、端末にインストールすることを指します。ビルド後、APK
ファイルを直にダウロードして、インストールします。
{{</note>}}

ステップ 1 : Android アプリの設定
---------------------------------

1.  Monaca クラウド IDE のメニューから、
    {{<menu menu1="設定" menu2="Android アプリ設定">}} を選択します。
2.  アプリに関する情報を入力します。

    -   一般的な設定

        <table class="small">
            <tr>
                <td width="25%">アプリケーション名</td>
                <td>アプリの名前を入力します。マーケット上などで表示されます。</td>
            </tr>
            <tr>
                <td>パッケージ名</td>
                <td>Android のマーケットへのアップロード時に使用される、一意の名前を入力します。逆ドメイン形式を推奨します ( io.monaca.app_name など )。英数字のみ使用でき、各節はピリオドで区切ります ( 1 つ以上のピリオドを使用 )。ピリオドで区切られた各節の先頭文字には、英字を使用します。また、アンダースコア ( _ ) も使用可能です。</td>
            </tr>
            <tr>
                <td>ビルド種別ごとにパッケージ名を分ける</td>
                <td>有効にした場合、リリースビルド版アプリのパッケージ名とデバッグビルト版アプリのパッケージ名は、異なる名になります。デバッグビルド版アプリのパッケージ名の拡張子は <code>.debug</code> となり、プロジェクトのデバッガーのパッケージ名の拡張子は <code>.debugger</code> となります。ただし、デフォルトでは、このオプションは無効になっています。Monaca 側で常時有効にしてしまうと、決まったパッケージ名に紐付けされているプラグインが存在する場合 ( In-App Purchase など )、デバッグができなくなるためです。</td>
            </tr>
            <tr>
                <td>バージョン</td>
                <td>アプリのバージョン番号を入力します。バージョン番号には、ドット区切りの数値を使用します ( 例 : 1.0.0 )。</td>
            </tr>
            <tr>
                <td>バージョンコード</td>
                <td>内部処理で使用する、アプリのバージョン番号です ( バージョンが複数ある同一アプリの処理用 )。整数を使用します。このコードを使用して、アプリの更新の有無を決定します。</td>
            </tr>
            <tr>
                <td>フルスクリーン</td>
                <td>このオプションは、Cordova 3.5 以降を使用している場合のみ、使用できます。有効にした場合、フルスクリーン ( 全画面表示 ) でアプリを実行します。ステータスバーは非表示になります。</td>
            </tr>
        </table>

        {{<img src="/images/monaca_ide/manual/build/android/1.png">}}

    -   その他 : ここでは、Android アプリに関する詳細を設定します。

        <table class="small">
            <tr>
                <td width="20%">許可する外部 URL</td>
                <td width="17%"><code>*</code></td>
                <td>アプリからアクセスできる URL ( 単数または複数 ) を指定します。「 * 」 に設定した場合、すべてのドメインへのアクセスを許可します。</td>
            </tr>
            <tr>
                <td>バックグラウンド時もアプリを常に実行</td>
                <td>有効</td>
                <td>バックグラウンド時にも Cordova を実行したい場合、有効化します。</td>
            </tr>
            <tr>
                <td>オーバースクロールを無効</td>
                <td>有効</td>
                <td>WebView の端を越えたときの挙動 ( オーバースクロールの有無 ) を設定します。</td>
            </tr>
            <tr>
                <td>WebView エンジン</td>
                <td>Stock WebView</td>
                <td>Cordova 5.2 以上の場合、Stocke WebView がデフォルトの設定となります。大規模なアプリなど、より良いパフォーマンスを期待する場合には、ハイパフォーマンス版 ( CrossWalk ) を使用します。この場合には、[ Cordova プラグインの管理 ] 画面から [ Crosswalk WebView Engine ] プラグインを有効化します。</td>
            </tr>
            <tr>
                <td>画面の向き</td>
                <td>Default</td>
                <td>Landscape または Portrait を指定できます ( アプリ実行時の画面の向き )。</td>
            </tr>
        </table>

3.  設定後、{{<guilabel name="保存する">}} をクリックします。

{{<note>}}
現在、iOS の [ App ID ] または Android の [ パッケージ名 ] のいずれかを変更すると、両方とも同じ名前に更新されます。それぞれに別の名を設定する場合には、{{<link href="/ja/faq/application/#app-id-ios-側-と-パッケージ名-android-側-にそれぞれ異なる値を設定するには" title="App ID ( iOS 側 ) と パッケージ名 ( Android 側 ) にそれぞれ異なる値を設定するには？">}} をご確認ください。
{{</note>}}

## ステップ 2 : Android キーストア ( KeyStore ) の設定


キーストアは、バイナリーファイルです。このファイルには、秘密鍵 (
単数または複数 ) が格納されています。秘密鍵は、組織または個人を表す 「
判子 」
の役割をします。キーストアは、パスワードを使用して、暗号化されます (
パスワードを紛失した場合には、復旧できません
)。キーストアを紛失した場合、または、別のキーストアで上書きされてしまった場合、同じ鍵を使用しても、署名済みパッケージを再署名することはできません。\[
翻訳者メモ ：
キーストアの内容に関しては、いろいろな説明方法があるようで、人によっては、「
キーストアには秘密鍵と証明書の情報がセットで格納されている 」、「
キーストアとは証明書そのものであり、そこには鍵情報が格納されている 」
としています。なお、このキーストアを apk ファイルに添えれば、「 署名 」
完了となります \]

リリースビルド版の Android
アプリをビルドするときに、キーストアが必要となります。Monaca
では、新規のキーストアを作成するか、または、既存のキーストアをインポートできます。ここでは、新規に作成することを前提に解説します。次の手順に従います。

1.  Monaca クラウド IDE のメニューから、
    {{<menu menu1="設定" menu2="Android キーストア設定">}} を選択します。
2.  「 キーストアとエイリアスの管理 」 画面が表示されます。

    {{<img src="/images/monaca_ide/manual/build/android/2.png">}}

3.  {{<guilabel name="クリアして新規作成">}} ボタンをクリックすると、キーストアの設定画面が表示されます。

    {{<img src="/images/monaca_ide/manual/build/android/3.png">}}

4.  上のスクリーンショットに表示されている項目に、必要な情報を入力します。

    -   エイリアス : アプリの署名時に使用する秘密鍵の名前です。1 つのキーストア内に、複数のエイリアスを格納できます。
    -   エイリアスのパスワード : エイリアス ( 秘密鍵 ) 用のパスワードです。
    -   キーストアのパスワード : キーストア用のパスワードです。このキーストアをインポートするときに、このパスワードが必要となります。

5.  次に、{{<guilabel name="キーストアとエイリアスを作成する">}}
    ボタンをクリックして、キーストアを作成します。

{{<note>}}
キーストアを紛失した場合、同じ鍵を使用しても、署名済みのパッケージに再署名を行うことはできなくなります。よって、アプリの署名に使用したキーストアの取り扱いには注意しましょう。バックアップを取ることを推奨します。キーストアをダウンロードする場合には、<code>エクスポート</code> ボタンをクリックします。
{{</note>}}

ステップ 3 : アプリのビルド
---------------------------

1.  Monaca クラウド IDE のメニューから、
    {{<menu menu1="ビルド" menu2="Android アプリのビルド">}} を選択します。
2.  目的に応じたビルドの種類を選択して、{{<guilabel name="ビルドを開始する">}}
    ボタンをクリックします。

    {{<img src="/images/monaca_ide/manual/build/android/4.png">}}

3.  「 リリース向けビルド 」 の 「 リリースビルド 」
    を選択した場合、ビルドを開始する前に、署名用エイリアスの選択とパスワードの入力を行います。

    {{<img src="/images/monaca_ide/manual/build/android/6.png">}}

5.  ビルドが完了するまで、しばらく待ちます。ビルドが成功した場合には、次のような画面が表示されます。ビルドの完了後、ビルド済みアプリをインストールまたはダウンロードできます。

    {{<img src="/images/monaca_ide/manual/build/android/7.png">}}
