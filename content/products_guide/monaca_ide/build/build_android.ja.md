Android アプリのビルド
======================

ビルドの種類
------------

Monaca では、デバッグビルド版、リリースビルド版の 2 種類の Android
アプリをビルドできます。これらの相違点は、次のとおりです。

+-----------+-------------------------+--------------------------------+
| ビルドの種類 | 明 | インスト        | ール方法                       |
|           |                         |                                |
| | 説      |                         |                                |
+===========+=========================+================================+
| *デバッグビルド* | > | パッケージに署名がないため、マーケット | での配布は行えません。 | - QR コード |
|           |                         |                                |
|           |                         |                                |
|           |                         | :   -   ネットワーク インストール &lt;debu |
|           |                         | gger\_project\_options&gt;     |
|           |                         |     -   サイドローディング (   |
|           |                         |         サイドローディング (   |
|           |                         |         Sideloading ) )        |
+-----------+-------------------------+--------------------------------+
| *リリースビルド* | | コードサイン ( | 使用して、署名したパッケージです。マーケットで配布できます。 |
|           |   コード署名/Code Sign  |                                |
|           |   ) を | |              | | - サイドローディング (       |
|           |                         | サイドローディング (           |
|           |                         | Sideloading ) ) - Google Play  |
|           |                         | ストア経由または他のマーケット経由 |
+-----------+-------------------------+--------------------------------+

<div class="admonition note">

サイドローディング ( Sideloading )
とは、一般的にはファイルのアップロード・ダウンロードを指しますが、ここでは、アプリのパッケージ
( APK 形式 )
を、マーケットを経由せずに、端末にインストールすることを指します。ビルド後、APK
ファイルを直にダウロードして、インストールします。

</div>

ステップ 1 : Android アプリの設定
---------------------------------

1.  Monaca クラウド IDE のメニューから、
    設定 --&gt; Android アプリ設定... を選択します。
2.  アプリに関する情報を入力します。

> -   一般的な設定
>
>       | バージョン                 | アプリのバージョン番号を入力します。バージョン番号には、ドット区切りの数値を使用します。       |
>
> :   | | (for example, 1.0.0) |
>     +-------------------------+-------------------------------------------------------------------------------------------------+
>     | バージョンコード |
>     内部処理で使用する、アプリのバージョン番号です (
>     バージョンが複数ある同一アプリの処理用 )。 | | |
>     整数を使用します。このコードを使用して、アプリの更新の有無を決定します。
>     |
>     +-------------------------+-------------------------------------------------------------------------------------------------+
>     | フルスクリーン | このオプションは、Cordova 3.5
>     以降を使用している場合のみ、使用できます。 | | |
>     有効にした場合、フルスクリーン ( 全画面表示 )
>     でアプリを実行します。ステータスバーは非表示になります。 |
>     +-------------------------+-------------------------------------------------------------------------------------------------+
>
> .. figure:: images/android/1.png
>
> :   
>
>     width
>
>     :   700px
>
>     align
>
>     :   left
>
> > -   その他 : ここでは、Android アプリに関する詳細を設定します。
> >
3.  設定後、 保存する をクリックします。

<div class="admonition note">

現在、iOS の \[ App ID \] または Android の \[ パッケージ名 \]
のいずれかを変更すると、両方とも同じ名前に更新されます。それぞれに別の名を設定する場合には、faq05-019
をご確認ください。

</div>

## ステップ 2 : Android キーストア ( KeyStore ) の設定


キーストアは、バイナリーファイルです。このファイルには、秘密鍵 (
単数または複数 ) が格納されています。秘密鍵は、組織または個人を表す 「
判子 」
の役割をします。キーストアは、パスワードを使用して、暗号化されます (
パスワードを紛失した場合には、復旧できません
)。キーストアを紛失した場合、または、別のキーストアで上書きされてしまった場合、同じ鍵を使用しても、署名済みパッケージを再署名することはできません。\[
翻訳者メモ ：
キーストアの内容に関しては、いろいろな説明方法があるようで、人によっては、「
キーストアには秘密鍵と証明書の情報がセットで格納されている 」、「
キーストアとは証明書そのものであり、そこには鍵情報が格納されている 」
としています。なお、このキーストアを apk ファイルに添えれば、「 署名 」
完了となります \]

リリースビルド版の Android
アプリをビルドするときに、キーストアが必要となります。Monaca
では、新規のキーストアを作成するか、または、既存のキーストアをインポートできます。ここでは、新規に作成することを前提に解説します。次の手順に従います。

1.  Monaca クラウド IDE のメニューから、
    設定 --&gt; Android キーストア設定... を選択します。
2.  「 キーストアとエイリアスの管理 」 画面が表示されます。

> ![](images/android/2.png)
>
> > width
> >
> > :   700px
> >
> > align
> >
> > :   left
> >
3.  クリアして新規作成
    ボタンをクリックすると、キーストアの設定画面が表示されます。

> ![](images/android/3.png)
>
> > width
> >
> > :   700px
> >
> > align
> >
> > :   left
> >
4.  上のスクリーンショットに表示されている項目に、必要な情報を入力します。

> -   エイリアス : アプリの署名時に使用する秘密鍵の名前です。1
>     つのキーストア内に、複数のエイリアスを格納できます。
> -   エイリアスのパスワード : エイリアス ( 秘密鍵 )
>     用のパスワードです。
> -   キーストアのパスワード :
>     キーストア用のパスワードです。このキーストアをインポートするときに、このパスワードが必要となります。

5.  次に、 キーストアとエイリアスを作成する
    ボタンをクリックして、キーストアを作成します。

<div class="admonition note">

キーストアを紛失した場合、同じ鍵を使用しても、署名済みのパッケージに再署名を行うことはできなくなります。よって、アプリの署名に使用したキーストアの取り扱いには注意しましょう。バックアップを取ることを推奨します。キーストアをダウンロードする場合には、エクスポート
ボタンをクリックします。

</div>

ステップ 3 : アプリのビルド
---------------------------

1.  Monaca クラウド IDE のメニューから、
    ビルド --&gt;Android アプリのビルド を選択します。
2.  目的に応じたビルドの種類を選択して、ビルドを開始する
    ボタンをクリックします。

> ![](images/android/4.png)
>
> > width
> >
> > :   700px
> >
> > align
> >
> > :   left
> >
3.  「 リリース向けビルド 」 の 「 リリースビルド 」
    を選択した場合、ビルドを開始する前に、署名用エイリアスの選択とパスワードの入力を行います。

> ![](images/android/6.png)
>
> > width
> >
> > :   700px
> >
> > align
> >
> > :   left
> >
5.  ビルドが完了するまで、しばらく待ちます。ビルドが成功した場合には、次のような画面が表示されます。ビルドの完了後、ビルド済みアプリをインストールまたはダウンロードできます。

> ![](images/android/7.png)
>
> > width
> >
> > :   700px
> >
> > align
> >
> > :   left
> >

