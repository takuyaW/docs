---
title: バックエンドの管理
weight: 20
---

\[ Monaca バックエンド管理 \] パネル上で操作できる項目を、次に記します。

- [ユーザー管理](#user-management)
- [コレクション管理](#collection_management)
- [メールテンプレートの管理](#mail-template-management)
- [プッシュ通知](../push_notification/overview)

## <a name="user-management"></a> ユーザー管理

バックエンド管理パネル上では、ユーザー関連のデータを手動で操作できます。

### ユーザーの新規追加

1.  バックエンド管理パネルから、 {{<menu menu1="ユーザー" menu2="ユーザー追加">}}を選択します。

    {{<img src="/images/backend/control_operations/4.png">}}

2.  ユーザー情報 ( ユーザー名、パスワード、プロパティー )
    を入力して、{{<guilabel name="追加する">}}ボタンをクリックします。

    {{<img src="/images/backend/control_operations/5.png">}}

    {{<note>}}
        正しい JSON の記法を使用して、プロパティーを記述してください。プロパティーの記述が正しくない場合、エラーが出力されます。
    {{</note>}}

3.  新規ユーザーの追加後、\[ ユーザー \]タブ上に新規のレコードが表示されます。

    {{<img src="/images/backend/control_operations/6.png">}}

### ユーザーのプロパティーの更新

1.  \[ ユーザー \]タブ上で、編集対象のユーザーレコードをクリックすると、プロパティーの内容が表示されます。

    {{<img src="/images/backend/control_operations/7.png" width="500">}}

2.  ユーザーのプロパティーを更新します。更新時には、正しい JSON
    の記法を使用します。ここでは、ユーザーの 「 age 」 を 27 から 25
    に変更し、加えて、「 job 」 プロパティーを追加してみましょう。

    {{<img src="/images/backend/control_operations/8.png" width="500">}}

    {{<note>}}
        プロパティーの追加と更新はできますが、削除はできません ( 削除後、更新すると再び表示されます )。また、システム側で使用するプロパティーは、原則、更新できません ( 「 _ 」 で始まるプロパティーがシステムプロパティーです。たとえば、「_createdAt 」、「 _id 」 などがあります )。ただし、「 _username 」 だけは、更新することができます。
    {{</note>}}

### ユーザーの削除

1.  \[ ユーザー \]タブ上で、削除するユーザーのレコードにチェックを入れます (複数選択可 )。
2.  {{<guilabel name="ユーザー削除">}}をクリックします。

    {{<img src="/images/backend/control_operations/9.png">}}

{{<warning>}}
    データをいったん削除してしまうと復旧できません。データを削除する場合には、ご注意ください。
{{</warning>}}

## <a name="collection_management"></a> コレクション管理

「 コレクション 」とはデータの集合体を意味します。データに対するパーミッション ( 権限 )をユーザー別に設定できるので、アプリ内で使うデータを適切に管理できます。設定可能なパーミッションには、`作成`、`アクセス許可`、`編集`、`削除`、`読み取り専用`の 5 種類があります。

ここでは、コレクションの管理方法を解説します。例として、`_id`、`name`( 名前 )、`color` ( 色 )、`taste` ( 味 )を、プロパティーの項目として使用します。データの行を `コレクションアイテム` と呼びます ( 例 : lemon、yellow、sour の行)。コレクションアイテムの集合体を、 `コレクション`と呼びます。データベースの用語を借りると、コレクションはテーブル、コレクションアイテムはレコードとなります。

コレクションアイテムには、アンダースコア ( 「 `_` 」 )で始まる、システムプロパティーが複数あります。たとえば、 `_id`は、システムプロパティーであり、コレクションアイテムを識別する一意の IDです。

| _id | name | color | taste |
|-----|------|-------|-------|
| 00001abc | apple | red | sweet |
| 00002def | orange | orange | sour-sweet |
| 00003ghi | lemon | yellow | sour |

### コレクションの新規作成

1.  バックエンド管理パネルから、`オプションメニュー`アイコンをクリックして、`コレクションの作成...` を選択します。

    {{<img src="/images/backend/control_operations/10.png">}}

2.  \[ コレクションの作成 \]ダイアログが表示されます。コレクションに関する情報を入力して、{{<guilabel name="追加する">}}ボタンをクリックします。

    - `コレクション名`: コレクションの名前を入力します。
    - `コレクションのセキュリティ`: {{<guilabel name="JavaScript からのアイテム追加を許可する">}}にチェックを入れた場合は、アプリからのコレクションへのデータ挿入を許可します。
    - `新規アイテムのパーミッション初期値`:{{<guilabel name="read">}}または/および {{<guilabel name="write">}} にチェックを入れ、新規アイテムに対して、読み取り または/および 書き込みパーミッション ( 権限 ) を与えるか選択します ( 対象はすべてのユーザーとなります )。

    {{<img src="/images/backend/control_operations/11.png">}}

### コレクションの削除

1.  バックエンド管理パネル上で、削除するコレクションを右クリックして、`コレクションを削除`を選択します。

    {{<img src="/images/backend/control_operations/12.png">}}

2.  {{<guilabel name="削除する">}}をクリックすると、確認ダイアログが表示されます。{{<guilabel name="はい">}}をクリックして、削除します。

### コレクションアイテムの新規追加

1.  バックエンド管理パネル上で、アイテムを追加するコレクションを選択します。次に、{{<guilabel name="アイテム追加">}}をクリックします。

    {{<img src="/images/backend/control_operations/13.png">}}

2.  コレクションアイテムのデータを、JSON 形式で入力して、{{<guilabel name="追加する">}}ボタンをクリックします。

    {{<img src="/images/backend/control_operations/14.png">}}

    {{<note>}}
        正しい JSON の記法を使用して、プロパティーを記述してください。プロパティーの記述が正しくない場合、エラーが出力されます。
    {{</note>}}

3.  アイテムの追加後、\[ コレクション名 \]タブ上に追加したアイテムが表示されます。

    {{<img src="/images/backend/control_operations/15.png">}}

#### コレクションアイテムの項目 ( 列 ) の表示・非表示

コレクションアイテムの表示項目 ( 列 )
には、デフォルトで、Oid、オーナーユーザ、作成日時、更新日時、パーミッションがあります。これらの項目は、表示・非表示にできます。

1.  \[ コレクション名 \] タブ上で、{{<menu menu1="詳細メニュー" menu2="列の追加">}}を選択します。

    {{<img src="/images/backend/control_operations/16.png">}}

2.  表示する項目 ( 列 ) を個別に追加していきます。

    {{<img src="/images/backend/control_operations/17.png">}}

3.  項目の表示位置は、手動で左右に変更できます。

    {{<img src="/images/backend/control_operations/18.png">}}

4.  項目を非表示にする場合、対象の項目上にカーソルを移動させ、表示されたドロップダウン
    アイコンから {{<guilabel name="この列を表示しない">}}を選択します (
    システムプロパティー以外が対象 )。

    {{<img src="/images/backend/control_operations/19.png">}}

### コレクションアイテムの更新

1.  \[ コレクション名 \]タブ上で、更新するアイテムを選択します。次に、アイテムのプロパティーが表示されます。
2.  正しい JSONの記法を使用して、アイテムのプロパティーを更新します。ここでは、アイテムの
    name と taste を、それぞれ変更してみます ( name : `lemon` から `banana` へ、taste : `sour` から `sweet` へ )。

    {{<img src="/images/backend/control_operations/20.png" width="500">}}

{{<note>}}
    プロパティーの追加と更新はできますが、削除はできません ( 削除後、更新すると再び表示されます )。また、システム側で使用するプロパティーは、更新できません ( 「 _ 」 で始まるプロパティーがシステムプロパティーです。たとえば、「 _createdAt 」、「 _id 」 などがあります )。
{{</note>}}

### コレクションの削除 Item

1.  \[ コレクション名 \]
    タブ上で、削除するアイテムにチェックを入れます。
2.  {{<guilabel name="アイテム削除">}}をクリックします。

    {{<img src="/images/backend/control_operations/21.png">}}

3.  確認用のダイアログが表示されるので、{{<guilabel name="はい">}}をクリックします。

{{<warning>}}
    データをいったん削除してしまうと復旧できません。データを削除する場合には、ご注意ください。
{{</warning>}}

### コレクションアイテムに付与したパーミッションの変更

コレクションアイテム毎、ユーザー毎に、パーミッションは変更できます。

2 種類のユーザーがいます。

1.  「 所有者 」
    は、コレクションを作成したユーザーを指します。所有者には、read (
    読み取り )・write ( 書き込み ) のパーミッションが常に付与されます。
2.  「 public 」 は、「 現在ログインしていない、すべてのユーザー 」
    を指します。デフォルトでは、これらのユーザーには、どちらのパーミッション
    ( read と write ) も付与されていません。

ユーザーのパーミッションをコレクションアイテム毎に変更する方法を、次に記します。

1.  \[ コレクション名 \] タブ上で、対象のアイテムに表示された
    {{<guilabel name="パーミッション">}} ( 南京錠 ) アイコンをクリックします。

    {{<img src="/images/backend/control_operations/22.png">}}

2.  \[ パーミッション設定 \]
    ダイアログが表示されます。ここでは、このコレクションアイテムに対するパーミッションを、ユーザー毎に変更できます。複数のユーザーが存在する場合には、ユーザーの一覧がコンボボックス上に表示され、ユーザーを選択できます。ユーザーの選択後、{{<guilabel name="read">}}または {{<guilabel name="write">}}にチェックを入れ、{{<guilabel name="追加する">}}ボタンをクリックします。これで、新規に設定したパーミッションが、選択したユーザーに適用されます。

    {{<img src="/images/backend/control_operations/23.png" width="500">}}

3.  {{<guilabel name="保存する">}}ボタンをクリックします。

## <a name="mail-template-management"></a>メールテンプレートの管理

アプリのユーザー宛に送信する電子メールのテンプレートを作成・編集できます。

1.  バックエンド管理パネル上で、{{<guilabel name="メールテンプレート">}}を選択します。
2.  メールテンプレートの作成画面が表示されます。ここで、メールテンプレートの編集・追加を行えます。

    {{<img src="/images/backend/control_operations/24.png">}}

3.  テンプレートの作成・編集後、{{<guilabel name="適用">}}ボタンをクリックします。

{{<note>}}
    メールテンプレートの作成・編集を行えるのは、Monaca クラウド IDE上だけです。
{{</note>}}
