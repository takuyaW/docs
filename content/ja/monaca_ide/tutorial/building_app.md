パート 4 : Monaca アプリのビルド
================================

こちらのチュートリアルでは、iOS 向けと Android 向けの Monaca
アプリのビルド方法を解説します。

1.  building\_monaca\_for\_ios
2.  building\_monaca\_for\_android

他のプラットフォーム向けの Monaca アプリのビルドに関しては、
build\_index をご確認ください。

iOS 向け Monaca アプリのビルド
------------------------------

端末にインストールできるデバッグビルド版 iOS
アプリの作成方法を解説します。ビルドの種類に関する詳細は、
types\_of\_build\_ios をご確認ください。

*事前準備*

-   [iOS Developer Program](https://developer.apple.com/programs/ios/)
    への登録 ( 必須 )

*必要事項*

iOS Developer Program 登録後、iOS Provisioning Portal
上で、次のアイテムを作成します。

-   `App ID` ( register\_appID と register\_dev\_device を参照のこと )
-   `デベロッパー証明書` ( 別名 「 開発用証明書 」、 create\_cer
    を参照のこと )
-   `開発用 プロビジョニング プロファイル` ( register\_provisioning
    を参照のこと )

### ステップ 1 : iOS アプリの設定

1.  Monaca クラウド IDE メニューから、設定 --&gt; iOS アプリ設定...
    を選択します。
2.  アプリに関する情報を入力します。

> -   アプリケーション名 : マーケット上で公開されるアプリ名です。
> -   App ID : アプリを識別する一意の ID です。App ID
>     には、逆ドメイン形式 ( 例 : mobi.monaca.appname )
>     を推奨します。英数字とピリオドのみ使用できます (
>     ピリオドは、最低限、1 つ使用 )。各レベルのドメイン ( 各節 )
>     は、ピリオドで区切られ、英字から始まります。
> -   バージョン : iTune Connect 経由で、アプリをアップロード (
>     配布のため )
>     するときに必要となる、アプリのバージョン番号です。ドットで区切った、3
>     つの数字 ( 例 : 1.10.2 ) を使用します。各数字は、\[0-99\]
>     の範囲にします。
> -   他の設定項目は、任意です。こちらの設定画面では、アイコン、スプラッシュ画像などを設定できます。
>
>     ![](images/building_app/ios_1.png){width="700px"}
>
> <div class="admonition warning">
>
> Monaca のビルド設定で使用する App ID には、iOS Provisioning Portal
> で登録した App ID と同じ ID を使用します。なお、Monaca
> のビルド設定で使用する App ID には、アスタリスク ( `*` )
> は使用できません。使用した場合、ビルドが失敗します。
>
> </div>

3.  設定後、 保存する をクリックします。

### ステップ 2 : iOS ビルドの設定

1.  Monaca クラウド IDE メニューから、設定 --&gt; iOS ビルド設定...
    を選択します。
2.  秘密鍵と CSR の生成 ボタンをクリックします。

> ![](images/building_app/ios_2.png){width="700px"}

3.  Apple ID 情報 ( ユーザー名とメールアドレス )
    および国コードを入力して、秘密鍵と CSR の生成
    ボタンをクリックします。既存の秘密鍵がある場合には、こちら &lt;import\_into\_monaca&gt;
    の内容に従い、インポートもできます。

> ![](images/building_app/ios_3.png){width="500px"}

4.  認証後、次のダイアログが表示されます。CSR のダウンロード
    ボタンをクリックして、CSR
    ファイルをダウンロードします。ダウンロードしたファイルは、後ほど、iOS
    Provisioning Portal で、証明書を発行するときに必要となります。

> ![](images/building_app/ios_5.png){width="500px"}

<div class="admonition note">

既存の秘密鍵をインポートする場合、インポートする秘密鍵を使用して発行した証明書が必要になります。また、秘密鍵と
CRS ファイルを新規作成する場合、新規作成した CRS
ファイルを使用して、証明書を新規発行する必要があります。

</div>

### パート 3 : アプリのビルド

1.  Monaca クラウド IDE のメニューから、
    ビルド --&gt; iOS アプリのビルド を選択します。
2.  \[ デバッグ向けビルド \] の デバッグビルド
    オプションを選択し、加えて、対応するプロビジョニング
    プロファイルを選択します。次に、ビルドを開始する
    ボタンをクリックします。

> ![](images/building_app/ios_6.png){width="700px"}

3.  ビルドが完了するまで数分かかる場合もありますので、しばらく待ちます。ビルドが完了すると、次の画面が表示されます。

> ![](images/building_app/ios_7.png){width="700px"}

### ステップ 4 : ビルドしたアプリのインストール

次のいずれかの方法を使用すれば、デバッグビルド版アプリをインストールできます。

> 1.  ビルド済みアプリをダウンロードし、iTunes を使用して、iOS
>     端末にインストールします。
> 2.  QR コードを使用して、インストールします。
> 3.  配信/配布支援サービス ( デプロイサービス ) &lt;supported\_services&gt;
>     経由でインストールします ( 各種設定が必要です )。

Android 向け Monaca アプリのビルド
----------------------------------

デバッグビルド版 Android
アプリの作成方法を解説します。ビルドの種類に関する詳細は、
types\_of\_build\_android をご確認ください。

### ステップ 1 : Android アプリの設定

1.  Monaca クラウド IDE のメニューから、 設定 --&gt; Android アプリ設定
    を選択します。
2.  アプリに関する情報を入力します。

> -   アプリケーション名 : マーケット上で公開されるアプリ名です。
> -   パッケージ名 : アプリを識別する一意の ID です。ID
>     には、逆ドメイン形式 ( 例 : mobi.monaca.appname )
>     の使用を推奨します。英数字とピリオドのみ使用できます (
>     ピリオドは、最低限、1 つ使用 )。各レベルのドメイン ( 各節 )
>     は、ピリオドで区切られ、英字から始まります。
> -   バージョン : アプリのバージョン番号です。ドットで区切った、3
>     つの数字 ( 例 : 1.10.2 ) を使用します。各数字は、\[0-99\]
>     の範囲にします。
> -   ビルド種別ごとにパッケージ名を分ける :
>     チェックをした場合、デバッグビルド版アプリのパッケージ名とカスタムビルド版デバッガーのパッケージ名は、異なる名になります。デバッグビルド版アプリのパッケージ名の拡張子は
>     `.debug` となり、プロジェクトのデバッガーのパッケージ名の拡張子は
>     `.debugger`
>     となります。ただし、デフォルトでは、このオプションは無効になっています。常時有効にしてしまうと、決まったパッケージ名
>     ( In-App Purchase など )
>     に紐付けされているプラグインが存在する場合、デバッグができなくなるためです。
> -   他の設定項目は、任意です。こちらの設定画面では、アイコン、スプラッシュ画像などを設定できます。
>
>     ![](images/building_app/android_1.png){width="700px"}
>
3.  設定後、 保存する をクリックします。

### ステップ 2 : Android キーストア ( Keystore ) の設定

Android キーストアを使用して、パッケージの署名に必要な鍵 ( エイリアス )
を格納します。キーストアを紛失した場合、または、別のキーストアで上書きした場合は、既に署名されているパッケージは、同じ鍵では再署名できません。1
つのキーストアには、複数のエイリアスを格納できますが、アプリのコード署名
( Code Sign ) 時には、エイリアスを 1 つのみ、使用します。

Monaca での Android キーストアの設定方法は、次のとおりです。

1.  Monaca クラウド IDE のメニューから、 設定 を選択して、次に、
    Android キーストア設定... を選択します。
2.  これまでにキーストアを作成したことがない場合、キーストアを新規に作成します。新規作成の他にも、既存のキーストアがあれば、インポートもできます。このチュートリアルでは、キーストアを新規に作成することを前提として解説します。クリアして作成 ...
    ボタンをクリックして、\[ キーストアを作成する \]
    ダイアログを表示させます。

> ![](images/building_app/android_2.png){width="700px"}

3.  キーストアに関する情報を入力します。

> -   エイリアス名 :
>     キーストアに格納する秘密鍵の名前です。秘密鍵は、パッケージの署名時に使用します。
> -   エイリアスのパスワード : エイリアス用のパスワードです。
> -   キーストアのパスワード : 新規のキーストア用のパスワードです。
>
> ![](images/building_app/android_3.png){width="700px"}

4.  キーストアとエイリアスを作成する ボタンをクリックします。

### パート 3 : アプリのビルド

1.  Monaca クラウド IDE のメニューから、 ビルド を選択して、次に、
    Android アプリのビルド を選択します。
2.  \[ デバッグ向けビルド \] の \[ デバッグビルド \]
    を選択して、ビルドを開始する ボタンをクリックします。

> ![](images/building_app/android_4.png){width="700px"}

3.  ビルドが完了するまで数分かかる場合もありますので、しばらく待ちます。ビルドが完了すると、次の画面が表示されます。

> ![](images/building_app/android_5.png){width="700px"}

### ステップ 4 : ビルドしたアプリのインストール

次のいずれかの方法を使用すれば、ビルドしたアプリをインストールできます。

1.  network\_and を使用します。
2.  QR コードを使用して、インストールします。
3.  ビルド済みアプリをコンピューターに直接ダウンロードし、USB
    ケーブル経由でインストールします。
4.  ビルド済みアプリのダウンロード元 ( URL )
    が記載されたメールを、Monaca
    に登録されているメールアドレスに送信します。
5.  配信/配布支援サービス ( デプロイサービス ) &lt;supported\_services&gt;
    経由でインストールします ( 各種設定が必要です )。

